<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>–ü–æ–≥–æ–¥–∞UA | –¢–æ—á–Ω–∏–π –ø—Ä–æ–≥–Ω–æ–∑ –ø–æ–≥–æ–¥–∏ –≤ –£–∫—Ä–∞—ó–Ω—ñ</title>
  
  <!-- SEO –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è -->
  <meta name="description" content="–ü–æ–≥–æ–¥–∞UA: —Ç–æ—á–Ω–∏–π –ø—Ä–æ–≥–Ω–æ–∑ –ø–æ–≥–æ–¥–∏ –≤ –£–∫—Ä–∞—ó–Ω—ñ –Ω–∞ —Å—å–æ–≥–æ–¥–Ω—ñ, –∑–∞–≤—Ç—Ä–∞ —Ç–∞ 5 –¥–Ω—ñ–≤. –ü–æ–≥–æ–¥–∞ –≤ –ö–∏—î–≤—ñ, –õ—å–≤–æ–≤—ñ, –û–¥–µ—Å—ñ, –•–∞—Ä–∫–æ–≤—ñ —Ç–∞ –≤—Å—ñ—Ö –º—ñ—Å—Ç–∞—Ö. –û–Ω–æ–≤–ª—é—î—Ç—å—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ.">
  <meta name="keywords" content="–ø–æ–≥–æ–¥–∞, –ø—Ä–æ–≥–Ω–æ–∑ –ø–æ–≥–æ–¥–∏, –ø–æ–≥–æ–¥–∞ –≤ –£–∫—Ä–∞—ó–Ω—ñ, –ø–æ–≥–æ–¥–∞ —Å—å–æ–≥–æ–¥–Ω—ñ, –ø–æ–≥–æ–¥–∞ –∑–∞—Ä–∞–∑, –º–µ—Ç–µ–æ–ø—Ä–æ–≥–Ω–æ–∑, –ø–æ–≥–æ–¥–∞ –ö–∏—ó–≤, –ø–æ–≥–æ–¥–∞ –õ—å–≤—ñ–≤, –ø–æ–≥–æ–¥–∞ –û–¥–µ—Å–∞, –ø–æ–≥–æ–¥–∞ –•–∞—Ä–∫—ñ–≤, –ø–æ–≥–æ–¥–∞ –î–Ω—ñ–ø—Ä–æ">
  <meta name="author" content="–ü–æ–≥–æ–¥–∞UA">
  <meta name="robots" content="index, follow">

  <!-- Open Graph —Ç–µ–≥–∏ -->
  <meta property="og:title" content="–ü–æ–≥–æ–¥–∞UA | –¢–æ—á–Ω–∏–π –ø—Ä–æ–≥–Ω–æ–∑ –ø–æ–≥–æ–¥–∏ –≤ –£–∫—Ä–∞—ó–Ω—ñ">
  <meta property="og:description" content="–ê–∫—Ç—É–∞–ª—å–Ω–∞ –ø–æ–≥–æ–¥–∞ –¥–ª—è –≤–∞—à–æ–≥–æ –º—ñ—Å—Ç–∞. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É, –≤–æ–ª–æ–≥—ñ—Å—Ç—å, –≤—ñ—Ç–µ—Ä —Ç–∞ –ø—Ä–æ–≥–Ω–æ–∑ –Ω–∞ —Ç–∏–∂–¥–µ–Ω—å.">
  <meta property="og:image" content="https://pogoda-ukr.web.app/og-image.jpg">
  <meta property="og:url" content="https://pogoda-ukr.web.app">
  <meta property="og:type" content="website">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="–ü–æ–≥–æ–¥–∞UA | –ü–æ–≥–æ–¥–∞ –≤ –£–∫—Ä–∞—ó–Ω—ñ">
  <meta name="twitter:description" content="–¢–æ—á–Ω–∏–π –ø—Ä–æ–≥–Ω–æ–∑ –ø–æ–≥–æ–¥–∏ –¥–ª—è –≤—Å—ñ—Ö –º—ñ—Å—Ç –£–∫—Ä–∞—ó–Ω–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ.">
  <meta name="twitter:image" content="https://pogoda-ukr.web.app/twitter-card.jpg">

  <!-- –ö–∞–Ω–æ–Ω—ñ—á–Ω–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è -->
  <link rel="canonical" href="https://pogoda-ukr.web.app">

  <!-- Structured Data (Schema.org) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "–ü–æ–≥–æ–¥–∞UA",
    "url": "https://pogoda-ukr.web.app",
    "description": "–¢–æ—á–Ω–∏–π –ø–æ–≥–æ–¥–Ω–∏–π –ø—Ä–æ–≥–Ω–æ–∑ –¥–ª—è –º—ñ—Å—Ç –£–∫—Ä–∞—ó–Ω–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ.",
    "inLanguage": "uk"
  }
  </script>

  <!-- –Ü–Ω—à—ñ –º–µ—Ç–∞-–¥–∞–Ω—ñ -->
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#2980b9">
  <link rel="apple-touch-icon" href="/icon-192x192.png">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      transition: background 0.5s ease, transform 0.3s ease, opacity 0.3s ease;
      -webkit-tap-highlight-color: transparent;
    }

    :root {
      --primary: #2980b9;
      --secondary: #2c3e50;
      --accent: #e74c3c;
      --text: #ecf0f1;
      --card-bg: rgba(255, 255, 255, 0.1);
      --card-bg-dark: rgba(13, 27, 42, 0.7);
      --shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
      --gradient-day: linear-gradient(135deg, #1e5799, #207cca, #2989d8);
      --gradient-night: linear-gradient(135deg, #0d1b2a, #1b263b, #415a77);
      --gradient-sunset: linear-gradient(135deg, #6a11cb, #2575fc, #ff7e5f);
    }

    body {
      font-family: 'Roboto', sans-serif;
      background: var(--gradient-day);
      background-size: 400% 400%;
      animation: gradientBG 15s ease infinite;
      color: var(--text);
      min-height: 100vh;
      padding: 12px;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow-x: hidden;
      position: relative;
      touch-action: manipulation;
    }

    body.dark-mode {
      background: var(--gradient-night);
    }

    /* Particle background */
    #particles-js {
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      z-index: -1;
    }

    @keyframes gradientBG {
      0% { background-position: 0% 50% }
      50% { background-position: 100% 50% }
      100% { background-position: 0% 50% }
    }

    .container {
      width: 100%;
      max-width: 1400px;
      margin: 0 auto;
      position: relative;
      z-index: 10;
      padding: 0 8px;
    }

    header {
      text-align: center;
      margin-bottom: 20px;
      padding: 12px 8px;
      position: relative;
      animation: fadeInDown 0.8s ease;
    }

    .theme-toggle {
      position: relative;
      top: 0;
      right: 0;
      margin: 0 auto 15px;
      width: fit-content;
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.3);
      border-radius: 30px;
      padding: 10px 20px;
      color: white;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 1rem;
      z-index: 100;
    }

    .theme-toggle:hover {
      background: rgba(255, 255, 255, 0.2);
      transform: translateY(-2px);
    }

    header h1 {
      font-family: 'Montserrat', sans-serif;
      font-size: 2rem;
      margin-bottom: 8px;
      text-shadow: 0 2px 10px rgba(0,0,0,0.2);
      font-weight: 700;
      letter-spacing: -0.5px;
      margin-top: 5px;
    }

    header p {
      font-size: 1rem;
      opacity: 0.9;
      max-width: 600px;
      margin: 0 auto;
      font-weight: 300;
      padding: 0 10px;
    }

    /* ===== Temu Banner Styles ===== */
    .temu-banner-wrapper {
      display: flex;
      justify-content: center;
      margin: 15px auto 25px;
      width: 100%;
      animation: fadeIn 0.8s ease;
    }

    .temu-banner-container {
      max-width: 300px;
      width: 100%;
      position: relative;
      transform: perspective(1000px) rotateX(5deg);
      transition: all 0.3s ease;
      height: 250px;
    }

    .temu-banner-container:hover {
      transform: perspective(1000px) rotateX(0deg) scale(1.02);
    }

    .temu-banner {
      background: linear-gradient(135deg, #ff6b6b, #ff8e8e, #ffa8a8);
      border-radius: 15px;
      padding: 20px;
      text-align: center;
      box-shadow: 
          0 10px 20px rgba(0,0,0,0.1),
          0 5px 10px rgba(0,0,0,0.05),
          inset 0 1px 0 rgba(255,255,255,0.2);
      position: relative;
      overflow: hidden;
      cursor: pointer;
      transition: all 0.3s ease;
      text-decoration: none;
      color: white;
      display: block;
      height: 100%;
    }

    .temu-banner:hover {
      box-shadow: 
          0 15px 30px rgba(0,0,0,0.15),
          0 7px 15px rgba(0,0,0,0.1),
          inset 0 1px 0 rgba(255,255,255,0.3);
      transform: translateY(-5px);
    }

    .temu-banner::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
      transform: rotate(45deg);
      transition: all 0.6s ease;
      opacity: 0;
    }

    .temu-banner:hover::before {
      animation: temu-shine 0.6s ease-in-out;
    }

    @keyframes temu-shine {
      0% {
          transform: translateX(-100%) translateY(-100%) rotate(45deg);
          opacity: 0;
      }
      50% {
          opacity: 1;
      }
      100% {
          transform: translateX(100%) translateY(100%) rotate(45deg);
          opacity: 0;
      }
    }

    .temu-gift-icon {
      font-size: 2.5rem;
      margin-bottom: 15px;
      display: block;
      animation: temu-bounce 2s infinite;
    }

    @keyframes temu-bounce {
      0%, 20%, 50%, 80%, 100% {
          transform: translateY(0);
      }
      40% {
          transform: translateY(-8px);
      }
      60% {
          transform: translateY(-4px);
      }
    }

    .temu-title {
      font-size: 1.5rem;
      font-weight: bold;
      margin-bottom: 10px;
      text-shadow: 0 1px 2px rgba(0,0,0,0.1);
      background: linear-gradient(45deg, #fff, #f0f0f0);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .temu-subtitle {
      font-size: 0.9rem;
      margin-bottom: 15px;
      opacity: 0.95;
      text-shadow: 0 1px 1px rgba(0,0,0,0.1);
    }

    .temu-cta-button {
      background: linear-gradient(45deg, #4CAF50, #45a049);
      color: white;
      border: none;
      padding: 10px 25px;
      font-size: 0.9rem;
      border-radius: 30px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 3px 10px rgba(76, 175, 80, 0.3);
      text-transform: uppercase;
      letter-spacing: 1px;
      font-weight: bold;
      position: relative;
      z-index: 2;
    }

    .temu-cta-button:hover {
      background: linear-gradient(45deg, #45a049, #4CAF50);
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(76, 175, 80, 0.4);
    }

    .temu-decorative-circles {
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      pointer-events: none;
      overflow: hidden;
      border-radius: 15px;
    }

    .temu-circle {
      position: absolute;
      border-radius: 50%;
      background: rgba(255,255,255,0.1);
      animation: temu-float 6s ease-in-out infinite;
    }

    .temu-circle:nth-child(1) {
      width: 50px;
      height: 50px;
      top: 15%;
      left: 15%;
      animation-delay: -2s;
    }

    .temu-circle:nth-child(2) {
      width: 80px;
      height: 80px;
      top: 70%;
      right: 15%;
      animation-delay: -4s;
    }

    .temu-circle:nth-child(3) {
      width: 40px;
      height: 40px;
      top: 45%;
      right: 20%;
      animation-delay: -1s;
    }

    @keyframes temu-float {
      0%, 100% {
          transform: translateY(0) rotate(0deg);
      }
      50% {
          transform: translateY(-15px) rotate(180deg);
      }
    }

    .temu-sparkles {
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      pointer-events: none;
    }

    .temu-sparkle {
      position: absolute;
      width: 3px;
      height: 3px;
      background: white;
      border-radius: 50%;
      animation: temu-sparkle 3s linear infinite;
    }

    .temu-sparkle:nth-child(1) { top: 20%; left: 20%; animation-delay: 0s; }
    .temu-sparkle:nth-child(2) { top: 30%; right: 25%; animation-delay: 1s; }
    .temu-sparkle:nth-child(3) { bottom: 25%; left: 30%; animation-delay: 2s; }

    @keyframes temu-sparkle {
      0%, 100% {
          opacity: 0;
          transform: scale(0);
      }
      50% {
          opacity: 1;
          transform: scale(1);
      }
    }

    .temu-banner-logo {
      position: absolute;
      bottom: 10px;
      right: 10px;
      font-size: 1.2rem;
      font-weight: bold;
      color: white;
      text-shadow: 0 1px 2px rgba(0,0,0,0.2);
      z-index: 2;
    }

    @media (max-width: 768px) {
      .temu-banner-container {
          max-width: 280px;
          height: 230px;
      }
      
      .temu-title {
          font-size: 1.3rem;
      }
      
      .temu-gift-icon {
          font-size: 2rem;
      }
    }

    .app-container {
      display: flex;
      flex-direction: column;
      gap: 18px;
      margin-bottom: 25px;
    }

    .weather-card {
      background: var(--card-bg);
      backdrop-filter: blur(10px);
      border-radius: 18px;
      box-shadow: var(--shadow);
      padding: 18px;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      animation: fadeIn 0.8s ease;
    }

    body.dark-mode .weather-card {
      background: var(--card-bg-dark);
    }

    .search-container {
      margin-bottom: 16px;
      position: relative;
    }

    .search-container i {
      position: absolute;
      left: 15px;
      top: 50%;
      transform: translateY(-50%);
      color: #5c9edc;
      z-index: 2;
    }

    #city {
      width: 100%;
      padding: 16px 16px 16px 45px;
      border: none;
      border-radius: 50px;
      background: rgba(255, 255, 255, 0.9);
      font-size: 1rem;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      transition: all 0.3s ease;
      position: relative;
      z-index: 1;
      -webkit-appearance: none;
      font-size: 1.05rem;
    }

    #city:focus {
      outline: none;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      background: white;
    }

    .btn-container {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-top: 10px;
    }

    button {
      flex: 1;
      padding: 16px;
      border: none;
      border-radius: 50px;
      background: linear-gradient(to right, #4facfe, #00f2fe);
      color: white;
      font-weight: 500;
      font-size: 1.05rem;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      min-height: 56px;
    }

    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
      background: linear-gradient(to right, #3a9dfc, #00d9fe);
    }

    button:active {
      transform: translateY(0);
    }

    #location-btn {
      background: linear-gradient(to right, #43e97b, #38f9d7);
    }

    #save-btn {
      background: linear-gradient(to right, #ff9a9e, #fad0c4);
    }

    .result-container {
      min-height: 260px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      position: relative;
    }

    #result {
      width: 100%;
    }

    .weather-icon {
      font-size: 4.2rem;
      margin: 12px 0;
      color: #FFD700;
      transition: transform 0.5s ease;
      filter: drop-shadow(0 0 10px rgba(255, 215, 0, 0.5));
    }

    .temp {
      font-size: 3rem;
      font-weight: 700;
      margin: 6px 0;
      font-family: 'Montserrat', sans-serif;
      text-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }

    .city-name {
      font-size: 1.6rem;
      font-weight: 600;
      margin-bottom: 12px;
      font-family: 'Montserrat', sans-serif;
    }

    .weather-desc {
      font-size: 1.2rem;
      margin-bottom: 15px;
      text-transform: capitalize;
      font-weight: 500;
    }

    .feels-like {
      font-size: 1.1rem;
      margin-bottom: 10px;
      position: relative;
      display: inline-block;
      padding-bottom: 6px;
    }

    .feels-like::after {
      content: "";
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 60%;
      height: 2px;
      background: linear-gradient(to right, transparent, rgba(255,255,255,0.5), transparent);
    }

    .details {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 10px;
      width: 100%;
      margin-top: 18px;
    }

    .detail-card {
      background: rgba(255, 255, 255, 0.1);
      border-radius: 15px;
      padding: 14px 10px;
      display: flex;
      flex-direction: column;
      align-items: center;
      transition: transform 0.3s ease;
      min-height: 120px;
    }

    body.dark-mode .detail-card {
      background: rgba(255, 255, 255, 0.05);
    }

    .detail-card:hover {
      transform: translateY(-5px);
    }

    .detail-card i {
      font-size: 1.8rem;
      margin-bottom: 10px;
      color: #a8d8ff;
    }

    .detail-value {
      font-size: 1.2rem;
      font-weight: 500;
      margin: 4px 0;
    }

    .detail-label {
      font-size: 0.9rem;
      opacity: 0.8;
    }

    .loading {
      display: none;
      text-align: center;
      padding: 20px;
    }

    .loading-spinner {
      border: 4px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      border-top: 4px solid #fff;
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
      margin: 0 auto 12px;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .error {
      color: #ff6b6b;
      text-align: center;
      padding: 12px;
      font-weight: 500;
      font-size: 1.1rem;
    }

    .error button {
      margin-top: 10px;
      background: rgba(255, 255, 255, 0.2);
      min-height: 48px;
    }

    .popular-cities {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      justify-content: center;
      margin-top: 15px;
    }

    .city-btn {
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.3);
      border-radius: 30px;
      padding: 10px 16px;
      color: white;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 0.95rem;
      white-space: nowrap;
      min-height: 40px;
    }

    .city-btn:hover {
      background: rgba(255, 255, 255, 0.2);
      transform: translateY(-2px);
    }

    footer {
      text-align: center;
      margin-top: 12px;
      padding: 12px;
      font-size: 0.85rem;
      opacity: 0.8;
      animation: fadeInUp 0.8s ease;
    }

    .unit-toggle {
      display: flex;
      justify-content: center;
      margin: 12px 0;
      gap: 8px;
    }

    .unit-btn {
      padding: 10px 24px;
      background: transparent;
      border: 1px solid rgba(255, 255, 255, 0.3);
      border-radius: 30px;
      color: white;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 1rem;
      min-height: 42px;
    }

    .unit-btn.active {
      background: rgba(255, 255, 255, 0.2);
    }

    /* Forecast styles */
    .forecast-container {
      margin-top: 20px;
      padding-top: 15px;
      border-top: 1px solid rgba(255, 255, 255, 0.2);
    }

    .forecast-header {
      text-align: center;
      margin-bottom: 18px;
      font-family: 'Montserrat', sans-serif;
      font-size: 1.4rem;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .forecast {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 10px;
    }

    .forecast-card {
      background: rgba(255, 255, 255, 0.1);
      border-radius: 15px;
      padding: 15px 10px;
      text-align: center;
      transition: transform 0.3s ease;
      min-height: 160px;
    }

    body.dark-mode .forecast-card {
      background: rgba(255, 255, 255, 0.05);
    }

    .forecast-card:hover {
      transform: translateY(-5px);
    }

    .forecast-day {
      font-weight: 600;
      margin-bottom: 8px;
      font-size: 1rem;
    }

    .forecast-icon {
      font-size: 2rem;
      margin: 8px 0;
      color: #FFD700;
      filter: drop-shadow(0 0 5px rgba(255, 215, 0, 0.3));
    }

    .forecast-temp {
      font-size: 1.2rem;
      font-weight: 500;
      margin: 4px 0;
    }

    .forecast-desc {
      font-size: 0.9rem;
      opacity: 0.9;
      margin-top: 4px;
      text-transform: capitalize;
    }

    .update-time {
      text-align: center;
      margin-top: 10px;
      font-size: 0.85rem;
      opacity: 0.7;
    }

    /* Hourly forecast */
    .hourly-container {
      margin-top: 20px;
      overflow-x: auto;
      padding-bottom: 12px;
      -webkit-overflow-scrolling: touch;
    }

    .hourly-header {
      text-align: center;
      margin-bottom: 16px;
      font-family: 'Montserrat', sans-serif;
      font-size: 1.4rem;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .hourly-forecast {
      display: flex;
      gap: 10px;
      padding: 8px;
      min-width: 100%;
      width: max-content;
    }

    .hourly-card {
      background: rgba(255, 255, 255, 0.1);
      border-radius: 15px;
      padding: 12px;
      min-width: 85px;
      text-align: center;
      transition: transform 0.3s ease;
      flex-shrink: 0;
    }

    body.dark-mode .hourly-card {
      background: rgba(255, 255, 255, 0.05);
    }

    .hourly-card:hover {
      transform: translateY(-5px);
    }

    .hourly-time {
      font-weight: 600;
      margin-bottom: 8px;
      font-size: 0.95rem;
    }

    .hourly-icon {
      font-size: 1.8rem;
      margin: 8px 0;
      color: #FFD700;
      filter: drop-shadow(0 0 5px rgba(255, 215, 0, 0.3));
    }

    .hourly-temp {
      font-size: 1.2rem;
      font-weight: 500;
      margin: 4px 0;
    }

    /* Map container */
    #map {
      height: 280px;
      width: 100%;
      border-radius: 18px;
      overflow: hidden;
      box-shadow: var(--shadow);
      margin-top: 20px;
      z-index: 1;
    }

    .leaflet-control-attribution {
      display: none;
    }

    /* Animations */
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes fadeInDown {
      from { opacity: 0; transform: translateY(-20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .fade-in {
      animation: fadeIn 0.8s ease forwards;
    }

    /* Stats */
    .stats-container {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
      margin-top: 20px;
    }

    .stat-card {
      background: rgba(255, 255, 255, 0.1);
      border-radius: 15px;
      padding: 16px;
      text-align: center;
      transition: transform 0.3s ease;
      min-height: 110px;
    }

    body.dark-mode .stat-card {
      background: rgba(255, 255, 255, 0.05);
    }

    .stat-card:hover {
      transform: translateY(-5px);
    }

    .stat-title {
      font-size: 0.95rem;
      margin-bottom: 8px;
      opacity: 0.8;
    }

    .stat-value {
      font-size: 1.6rem;
      font-weight: 700;
      font-family: 'Montserrat', sans-serif;
    }

    /* UV Index */
    .uv-index {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 20px;
      font-weight: 600;
      margin-top: 5px;
      font-size: 0.9rem;
    }

    .uv-low { background: #2ecc71; }
    .uv-moderate { background: #f1c40f; }
    .uv-high { background: #e67e22; }
    .uv-very-high { background: #e74c3c; }
    .uv-extreme { background: #8e44ad; }

    /* New Footer Styles */
    .footer-content {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .footer-links {
      display: flex;
      justify-content: center;
      gap: 25px;
      flex-wrap: wrap;
      margin-top: 8px;
    }

    .footer-links a {
      color: rgba(255, 255, 255, 0.8);
      text-decoration: none;
      transition: all 0.3s ease;
      font-size: 0.95rem;
    }

    .footer-links a:hover {
      color: white;
      text-decoration: underline;
    }

    /* Modal Styles */
    .modal {
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.7);
      display: none;
      justify-content: center;
      align-items: center;
    }

    .modal-content {
      background: var(--card-bg);
      backdrop-filter: blur(12px);
      margin: auto;
      padding: 25px;
      border-radius: 20px;
      max-width: 600px;
      width: 90%;
      max-height: 90vh;
      overflow-y: auto;
      position: relative;
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
      animation: fadeIn 0.4s ease;
    }

    body.dark-mode .modal-content {
      background: var(--card-bg-dark);
    }

    .modal-content h3 {
      margin-bottom: 15px;
      font-family: 'Montserrat', sans-serif;
      font-size: 1.6rem;
    }

    .modal-content p {
      margin-bottom: 12px;
      line-height: 1.6;
    }

    .close {
      color: #aaa;
      position: absolute;
      top: 15px;
      right: 20px;
      font-size: 28px;
      font-weight: bold;
      cursor: pointer;
      transition: color 0.3s ease;
    }

    .close:hover {
      color: white;
    }

    .social-links {
      display: flex;
      gap: 15px;
      margin-top: 15px;
      justify-content: center;
    }

    .social-links a {
      color: white;
      font-size: 1.8rem;
      transition: transform 0.3s ease;
    }

    .social-links a:hover {
      transform: translateY(-3px);
    }

    /* Weather Alert */
    .weather-alert {
      background: linear-gradient(to right, #ff416c, #ff4b2b);
      padding: 12px 20px;
      border-radius: 12px;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 12px;
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0% { box-shadow: 0 0 0 0 rgba(255, 65, 108, 0.4); }
      70% { box-shadow: 0 0 0 10px rgba(255, 65, 108, 0); }
      100% { box-shadow: 0 0 0 0 rgba(255, 65, 108, 0); }
    }

    /* Saved Cities */
    .saved-cities-container {
      margin-top: 15px;
      padding-top: 15px;
      border-top: 1px solid rgba(255, 255, 255, 0.2);
    }

    .saved-header {
      text-align: center;
      margin-bottom: 12px;
      font-family: 'Montserrat', sans-serif;
      font-size: 1.2rem;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .saved-cities {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      justify-content: center;
    }

    /* –î–æ–¥–∞—î–º–æ —Å—Ç–∏–ª—ñ –¥–ª—è –∞–≤—Ç–æ–¥–æ–ø–æ–≤–Ω–µ–Ω–Ω—è */
    .suggestions-container {
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background: rgba(255, 255, 255, 0.95);
      border-radius: 0 0 15px 15px;
      box-shadow: 0 10px 20px rgba(0,0,0,0.1);
      z-index: 1000;
      max-height: 200px;
      overflow-y: auto;
      display: none;
    }

    body.dark-mode .suggestions-container {
      background: var(--card-bg-dark);
    }

    .suggestion-item {
      padding: 12px 15px;
      border-bottom: 1px solid rgba(0,0,0,0.05);
      cursor: pointer;
      font-size: 1rem;
      color: #333;
      transition: background 0.2s;
      text-align: left;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    body.dark-mode .suggestion-item {
      color: #fff;
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }

    .suggestion-item:hover {
      background: rgba(0,0,0,0.05);
    }

    body.dark-mode .suggestion-item:hover {
      background: rgba(255,255,255,0.1);
    }

    .suggestion-item strong {
      font-weight: 600;
      color: var(--primary);
    }

    body.dark-mode .suggestion-item strong {
      color: #4facfe;
    }

    /* Responsive */
    @media (min-width: 480px) {
      .weather-card {
        padding: 20px;
      }
      
      .btn-container {
        flex-direction: row;
      }
      
      #location-btn {
        min-width: 55px;
        padding: 0;
      }
      
      .popular-cities {
        gap: 10px;
      }
      
      .city-btn {
        padding: 10px 18px;
      }
      
      #map {
        height: 300px;
      }
      
      .temp {
        font-size: 3.2rem;
      }
      
      .weather-icon {
        font-size: 4.5rem;
      }
      
      .city-name {
        font-size: 1.8rem;
      }
      
      .weather-desc {
        font-size: 1.3rem;
      }
    }

    @media (min-width: 768px) {
      body {
        padding: 15px;
      }
      
      .app-container {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
      }
      
      header h1 {
        font-size: 2.5rem;
        margin-top: 10px;
      }
      
      .theme-toggle {
        position: absolute;
        top: 15px;
        right: 15px;
        margin: 0;
      }
      
      .weather-card {
        padding: 22px;
        border-radius: 20px;
      }
      
      .temp {
        font-size: 3.5rem;
      }
      
      .weather-icon {
        font-size: 5rem;
      }

      .forecast {
        flex-direction: row;
        flex-wrap: wrap;
        display: flex;
      }

      .forecast-card {
        min-width: calc(33% - 10px);
        max-width: calc(33% - 10px);
      }
      
      .details {
        grid-template-columns: repeat(3, 1fr);
      }
      
      .stats-container {
        grid-template-columns: repeat(4, 1fr);
      }
      
      #map {
        height: 320px;
      }
    }
    
    @media (min-width: 992px) {
      .container {
        padding: 0;
      }
      
      header {
        padding: 15px;
        margin-bottom: 30px;
      }
      
      header h1 {
        font-size: 2.8rem;
      }
      
      .app-container {
        gap: 25px;
      }
      
      .weather-card {
        padding: 25px;
      }
      
      .temp {
        font-size: 4rem;
      }
      
      .weather-icon {
        font-size: 5.5rem;
      }
      
      .city-name {
        font-size: 2rem;
      }
      
      .weather-desc {
        font-size: 1.5rem;
      }
      
      #map {
        height: 350px;
      }
    }
    
    @media (max-width: 380px) {
      .forecast {
        grid-template-columns: 1fr;
      }
      
      .popular-cities {
        flex-direction: column;
        align-items: center;
      }
      
      .city-btn {
        width: 100%;
        max-width: 200px;
      }
      
      .details {
        grid-template-columns: 1fr;
        max-width: 300px;
        margin-left: auto;
        margin-right: auto;
      }
      
      .stats-container {
        grid-template-columns: 1fr;
      }
      
      .temp {
        font-size: 2.8rem;
      }
      
      .city-name {
        font-size: 1.5rem;
      }
      
      .weather-desc {
        font-size: 1.1rem;
      }
      
      #map {
        height: 240px;
      }
    }
    
    @media (max-width: 320px) {
      body {
        padding: 8px;
      }
      
      header h1 {
        font-size: 1.8rem;
      }
      
      header p {
        font-size: 0.95rem;
      }
      
      .weather-card {
        padding: 15px;
      }
      
      #city {
        padding: 14px 14px 14px 40px;
        font-size: 0.95rem;
      }
      
      button {
        padding: 14px;
        font-size: 1rem;
      }
      
      .temp {
        font-size: 2.5rem;
      }
      
      .weather-icon {
        font-size: 3.8rem;
      }
      
      .city-name {
        font-size: 1.4rem;
      }
      
      .weather-desc {
        font-size: 1.05rem;
      }
      
      .forecast-card {
        min-width: 100%;
        padding: 12px 8px;
      }
      
      .forecast-temp {
        font-size: 1.1rem;
      }
      
      .forecast-icon {
        font-size: 1.8rem;
      }
      
      .hourly-card {
        min-width: 80px;
        padding: 10px;
      }
      
      .hourly-time {
        font-size: 0.9rem;
      }
      
      .hourly-temp {
        font-size: 1.1rem;
      }
      
      .stat-value {
        font-size: 1.4rem;
      }

      .footer-links {
        flex-direction: column;
        align-items: center;
        gap: 8px;
      }
      
      .modal-content {
        padding: 20px 15px;
      }
    }
  </style>
</head>
<body>
  <div id="particles-js"></div>
  
  <div class="container">
    <header>
      <button class="theme-toggle" onclick="toggleDarkMode()">
        <i class="fas fa-moon"></i> –¢–µ–º–Ω–∏–π —Ä–µ–∂–∏–º
      </button>
      <h1><i class="fas fa-cloud-sun"></i> –ü–æ–≥–æ–¥–∞UA</h1>
      <p>–¢–æ—á–Ω–∏–π –ø—Ä–æ–≥–Ω–æ–∑ –ø–æ–≥–æ–¥–∏ –¥–ª—è –±—É–¥—å-—è–∫–æ–≥–æ –º—ñ—Å—Ç–∞ —Ç–∞ —Å–µ–ª–∞ –£–∫—Ä–∞—ó–Ω–∏</p>
    </header>

    <!-- Temu Banner Integration -->
    <div class="temu-banner-wrapper">
      <div class="temu-banner-container">
        <a href="https://share.temu.com/SBVbTVw3gxB" target="_blank" class="temu-banner">
          <div class="temu-decorative-circles">
            <div class="temu-circle"></div>
            <div class="temu-circle"></div>
            <div class="temu-circle"></div>
          </div>
          
          <div class="temu-sparkles">
            <div class="temu-sparkle"></div>
            <div class="temu-sparkle"></div>
            <div class="temu-sparkle"></div>
          </div>
          
          <div class="temu-gift-icon">üéÅ</div>
          <h1 class="temu-title">–ü–æ–¥–∞—Ä—É–Ω–æ–∫ —É Temu</h1>
          <p class="temu-subtitle">–í—ñ–¥–∫—Ä–∏–π—Ç–µ —Å–≤—ñ—Ç –∑–Ω–∏–∂–æ–∫ —Ç–∞ —è–∫—ñ—Å–Ω–∏—Ö —Ç–æ–≤–∞—Ä—ñ–≤</p>
          <div class="temu-cta-button">–û—Ç—Ä–∏–º–∞—Ç–∏</div>
          <div class="temu-banner-logo">TEMU</div>
        </a>
      </div>
    </div>

    <div class="app-container">
      <div class="weather-card fade-in">
        <div class="search-container">
          <i class="fas fa-search"></i>
          <input type="text" id="city" placeholder="–í–≤–µ–¥—ñ—Ç—å –Ω–∞—Å–µ–ª–µ–Ω–∏–π –ø—É–Ω–∫—Ç (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥: –ë–æ—è—Ä–∫–∞, –ö–æ–∑–∞—Ä–æ–≤–∏—á—ñ)" />
          <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –∞–≤—Ç–æ–¥–æ–ø–æ–≤–Ω–µ–Ω–Ω—è -->
          <div id="suggestions" class="suggestions-container"></div>
        </div>

        <div class="btn-container">
          <button onclick="getWeather()">
            <i class="fas fa-cloud-sun"></i> –ü–æ–∫–∞–∑–∞—Ç–∏ –ø–æ–≥–æ–¥—É
          </button>
          <button id="location-btn" onclick="getLocation()">
            <i class="fas fa-location-arrow"></i> –ú–æ—î –º—ñ—Å—Ü–µ
          </button>
          <button id="save-btn" onclick="saveCity()">
            <i class="fas fa-bookmark"></i> –ó–±–µ—Ä–µ–≥—Ç–∏
          </button>
        </div>

        <div class="unit-toggle">
          <button class="unit-btn active" onclick="setUnit('metric')">¬∞C</button>
          <button class="unit-btn" onclick="setUnit('imperial')">¬∞F</button>
        </div>

        <div class="popular-cities">
          <div class="city-btn" onclick="setCity('–ö–∏—ó–≤')">–ö–∏—ó–≤</div>
          <div class="city-btn" onclick="setCity('–õ—å–≤—ñ–≤')">–õ—å–≤—ñ–≤</div>
          <div class="city-btn" onclick="setCity('–ë–æ—è—Ä–∫–∞')">–ë–æ—è—Ä–∫–∞</div>
          <div class="city-btn" onclick="setCity('–ö–æ–∑–∞—Ä–æ–≤–∏—á—ñ')">–ö–æ–∑–∞—Ä–æ–≤–∏—á—ñ</div>
          <div class="city-btn" onclick="setCity('–ì–æ—Ä–µ–Ω–∫–∞')">–ì–æ—Ä–µ–Ω–∫–∞</div>
        </div>

        <div class="result-container">
          <div class="loading">
            <div class="loading-spinner"></div>
            <p>–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö...</p>
          </div>
          
          <div id="result">
            <div class="welcome-message">
              <i class="fas fa-cloud-sun weather-icon"></i>
              <h2 class="city-name">–õ–∞—Å–∫–∞–≤–æ –ø—Ä–æ—Å–∏–º–æ!</h2>
              <p class="weather-desc">–í–≤–µ–¥—ñ—Ç—å –Ω–∞–∑–≤—É –Ω–∞—Å–µ–ª–µ–Ω–æ–≥–æ –ø—É–Ω–∫—Ç—É (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥: –ë–æ—è—Ä–∫–∞, –ö–æ–∑–∞—Ä–æ–≤–∏—á—ñ)</p>
            </div>
          </div>
        </div>

        <div class="saved-cities-container" id="savedContainer" style="display: none;">
          <h3 class="saved-header"><i class="fas fa-bookmark"></i> –ó–±–µ—Ä–µ–∂–µ–Ω—ñ –º—ñ—Å—Ç–∞</h3>
          <div class="saved-cities" id="savedCities"></div>
        </div>

        <div class="forecast-container" id="forecastContainer" style="display: none;">
          <h3 class="forecast-header"><i class="fas fa-calendar-days"></i> –ü—Ä–æ–≥–Ω–æ–∑ –Ω–∞ 5 –¥–Ω—ñ–≤</h3>
          <div class="forecast" id="forecast"></div>
        </div>
      </div>
      
      <div class="weather-card fade-in" style="animation-delay: 0.2s;">
        <div class="hourly-container">
          <h3 class="hourly-header"><i class="fas fa-clock"></i> –ü–æ—á–∞—Å–æ–≤–∏–π –ø—Ä–æ–≥–Ω–æ–∑</h3>
          <div class="hourly-forecast" id="hourlyForecast"></div>
        </div>
        
        <div id="map"></div>
        
        <div class="stats-container">
          <div class="stat-card">
            <div class="stat-title">–Ø–∫—ñ—Å—Ç—å –ø–æ–≤—ñ—Ç—Ä—è</div>
            <div class="stat-value"><span id="airQuality">–î–æ–±—Ä–∞</span></div>
          </div>
        </div>
      </div>
    </div>

    <footer>
      <div class="footer-content">
        <p>¬© 2025 –ü–æ–≥–æ–¥–∞UA | –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –¥–∞–Ω—ñ OpenWeatherMap | –†–æ–∑—Ä–æ–±–ª–µ–Ω–æ –∑ ‚ù§Ô∏è –¥–ª—è –£–∫—Ä–∞—ó–Ω–∏</p>
        <div class="footer-links">
          <a href="#" onclick="showAbout()">–ü—Ä–æ –Ω–∞—Å</a>
          <a href="#" onclick="showContact()">–ö–æ–Ω—Ç–∞–∫—Ç–∏</a>
          <a href="#" onclick="showPrivacy()">–ü–æ–ª—ñ—Ç–∏–∫–∞ –∫–æ–Ω—Ñ—ñ–¥–µ–Ω—Ü—ñ–π–Ω–æ—Å—Ç—ñ</a>
        </div>
        <div style="text-align:center; margin-top: 1rem;">
          <img 
            src="https://hits.sh/pogoda-ukr.web.app.svg?style=flat-square&label=–ü–µ—Ä–µ–≥–ª—è–¥–∏&color=blue" 
            alt="–õ—ñ—á–∏–ª—å–Ω–∏–∫ –ø–µ—Ä–µ–≥–ª—è–¥—ñ–≤ –ü–æ–≥–æ–¥–∞UA"
            style="max-width: 100%; height: auto;"
          />
        </div>
      </div>
    </footer>
  </div>

  <!-- Modal Windows -->
  <div id="aboutModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal('aboutModal')">&times;</span>
      <h3>–ü—Ä–æ –ü–æ–≥–æ–¥–∞UA</h3>
      <p>–ü–æ–≥–æ–¥–∞UA - —Ü–µ —ñ–Ω–Ω–æ–≤–∞—Ü—ñ–π–Ω–∏–π —Å–µ—Ä–≤—ñ—Å –ø—Ä–æ–≥–Ω–æ–∑—É –ø–æ–≥–æ–¥–∏, —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–æ —Ä–æ–∑—Ä–æ–±–ª–µ–Ω–∏–π –¥–ª—è –ø–æ—Ç—Ä–µ–± –£–∫—Ä–∞—ó–Ω–∏. –ù–∞—à–∞ –º—ñ—Å—ñ—è - –Ω–∞–¥–∞–≤–∞—Ç–∏ —Ç–æ—á–Ω—ñ —Ç–∞ —Å–≤–æ—î—á–∞—Å–Ω—ñ –º–µ—Ç–µ–æ—Ä–æ–ª–æ–≥—ñ—á–Ω—ñ –¥–∞–Ω—ñ –¥–ª—è –≤—Å—ñ—Ö —Ä–µ–≥—ñ–æ–Ω—ñ–≤ –∫—Ä–∞—ó–Ω–∏.</p>
      <p>–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –¥–∞–Ω—ñ –∑ –Ω–∞–¥—ñ–π–Ω–∏—Ö –¥–∂–µ—Ä–µ–ª —Ç–∞ —Å—É—á–∞—Å–Ω—ñ —Ç–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó –∞–Ω–∞–ª—ñ–∑—É –¥–ª—è –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è –Ω–∞–π–∫—Ä–∞—â–æ–≥–æ –¥–æ—Å–≤—ñ–¥—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤.</p>
      <p>–ù–∞—à—ñ –ø—Ä–æ–≥–Ω–æ–∑–∏ –¥–æ–ø–æ–º–∞–≥–∞—é—Ç—å –ø–ª–∞–Ω—É–≤–∞—Ç–∏ –¥–µ–Ω—å, –ø–æ–¥–æ—Ä–æ–∂—ñ —Ç–∞ —Ä–æ–±–æ—á—ñ –ø—Ä–æ—Ü–µ—Å–∏ –∑ —É—Ä–∞—Ö—É–≤–∞–Ω–Ω—è–º –ø–æ–≥–æ–¥–Ω–∏—Ö —É–º–æ–≤.</p>
      </div>
    </div>
  </div>

  <div id="contactModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal('contactModal')">&times;</span>
      <h3>–ù–∞—à—ñ –∫–æ–Ω—Ç–∞–∫—Ç–∏</h3>
      <p><i class="fas fa-envelope"></i> Email: voanarhes@gmail.com</p>
      </div>
    </div>
  </div>

  <div id="privacyModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal('privacyModal')">&times;</span>
      <h3>–ü–æ–ª—ñ—Ç–∏–∫–∞ –∫–æ–Ω—Ñ—ñ–¥–µ–Ω—Ü—ñ–π–Ω–æ—Å—Ç—ñ</h3>
      <p>–í–∞—à–∞ –∫–æ–Ω—Ñ—ñ–¥–µ–Ω—Ü—ñ–π–Ω—ñ—Å—Ç—å –¥—É–∂–µ –≤–∞–∂–ª–∏–≤–∞ –¥–ª—è –Ω–∞—Å. –¶—è –ø–æ–ª—ñ—Ç–∏–∫–∞ –ø–æ—è—Å–Ω—é—î, —è–∫ –º–∏ –∑–±–∏—Ä–∞—î–º–æ, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ —Ç–∞ –∑–∞—Ö–∏—â–∞—î–º–æ –≤–∞—à—É –æ—Å–æ–±–∏—Å—Ç—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é.</p>
      <h4>–ó–±–∏—Ä–∞–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è</h4>
      <p>–ú–∏ –∑–±–∏—Ä–∞—î–º–æ –ª–∏—à–µ –Ω–µ–æ–±—Ö—ñ–¥–Ω—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –¥–ª—è –Ω–∞–¥–∞–Ω–Ω—è –ø–æ—Å–ª—É–≥ –ø—Ä–æ–≥–Ω–æ–∑—É –ø–æ–≥–æ–¥–∏, —Ç–∞–∫—É —è–∫ –≤–∞—à–µ –º—ñ—Å—Ü–µ–∑–Ω–∞—Ö–æ–¥–∂–µ–Ω–Ω—è (—è–∫—â–æ –≤–∏ –Ω–∞–¥–∞—î—Ç–µ –¥–æ–∑–≤—ñ–ª) —Ç–∞ –Ω–∞–∑–≤–∏ –º—ñ—Å—Ç, —è–∫—ñ –≤–∏ —à—É–∫–∞—î—Ç–µ.</p>
      <h4>–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö</h4>
      <p>–í–∞—à—ñ –¥–∞–Ω—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è –≤–∏–∫–ª—é—á–Ω–æ –¥–ª—è –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è —è–∫–æ—Å—Ç—ñ –Ω–∞—à–∏—Ö –ø–æ—Å–ª—É–≥ —Ç–∞ –Ω—ñ–∫–æ–ª–∏ –Ω–µ –ø–µ—Ä–µ–¥–∞—é—Ç—å—Å—è —Ç—Ä–µ—Ç—ñ–º –æ—Å–æ–±–∞–º –±–µ–∑ –≤–∞—à–æ–≥–æ –¥–æ–∑–≤–æ–ª—É.</p>
      <h4>–ó–∞—Ö–∏—Å—Ç –¥–∞–Ω–∏—Ö</h4>
      <p>–ú–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ —Å—É—á–∞—Å–Ω—ñ –º–µ—Ç–æ–¥–∏ —à–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è –¥–ª—è –∑–∞—Ö–∏—Å—Ç—É –≤–∞—à–∏—Ö –¥–∞–Ω–∏—Ö. –í–∞—à–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –Ω–∞ –∑–∞—Ö–∏—â–µ–Ω–∏—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö —ñ –¥–æ—Å—Ç—É–ø–Ω–∞ –ª–∏—à–µ –æ–±–º–µ–∂–µ–Ω–æ–º—É –∫–æ–ª—É —Å–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫—ñ–≤.</p>
      <h4>Cookies</h4>
      <p>–ú–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ cookies –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å —Ç–µ–º–∏ —Ç–∞ –∑–±–µ—Ä–µ–∂–µ–Ω–∏—Ö –º—ñ—Å—Ç. –í–∏ –º–æ–∂–µ—Ç–µ –≤—ñ–¥–∫–ª—é—á–∏—Ç–∏ cookies —É –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è—Ö –±—Ä–∞—É–∑–µ—Ä–∞.</p>
    </div>
  </div>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
  <script>
    const apiKey = '75bbd87725d5ab4f7dc8eaa3700764a0';
    let currentUnit = 'metric';
    let lastCity = '';
    let map = null;
    let mapInitialized = false;
    let geocodeCache = JSON.parse(localStorage.getItem('geocodeCache')) || {};

    // –§—É–Ω–∫—Ü—ñ—è –≥–µ–æ–∫–æ–¥—É–≤–∞–Ω–Ω—è –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ –ø–æ—à—É–∫—É —Å—ñ–ª
    async function geocodeLocation(locationName) {
      const normalizedLocation = locationName.trim().toLowerCase();
      
      // –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ –∫–µ—à
      if (geocodeCache[normalizedLocation]) {
        return geocodeCache[normalizedLocation];
      }

      try {
        const response = await fetch(
          `https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(locationName + ', –£–∫—Ä–∞–∏–Ω–∞')}&countrycodes=ua&limit=1`
        );
        const data = await response.json();
        
        if (data && data.length > 0) {
          const result = {
            lat: parseFloat(data[0].lat),
            lon: parseFloat(data[0].lon),
            displayName: data[0].display_name.split(',')[0]
          };
          
          // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ –≤ –∫–µ—à
          geocodeCache[normalizedLocation] = result;
          localStorage.setItem('geocodeCache', JSON.stringify(geocodeCache));
          
          return result;
        }
        throw new Error("–ú—ñ—Å—Ü–µ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ");
      } catch (error) {
        throw new Error("–ü–æ–º–∏–ª–∫–∞ –≥–µ–æ–∫–æ–¥—É–≤–∞–Ω–Ω—è: " + error.message);
      }
    }

    // Initialize particles background
    particlesJS("particles-js", {
      particles: {
        number: { value: 60, density: { enable: true, value_area: 800 } },
        color: { value: "#ffffff" },
        shape: { type: "circle" },
        opacity: { value: 0.1, random: true },
        size: { value: 3, random: true },
        line_linked: {
          enable: true,
          distance: 150,
          color: "#ffffff",
          opacity: 0.05,
          width: 1
        },
        move: {
          enable: true,
          speed: 1,
          direction: "none",
          random: true,
          straight: false,
          out_mode: "out",
          bounce: false
        }
      },
      interactivity: {
        detect_on: "canvas",
        events: {
          onhover: { enable: true, mode: "repulse" },
          onclick: { enable: true, mode: "push" },
          resize: true
        }
      }
    });

    // Initialize dark mode from localStorage
    function initDarkMode() {
      const isDark = localStorage.getItem('darkMode') === 'true';
      document.body.classList.toggle('dark-mode', isDark);
      updateThemeButton(isDark);
      
      // Auto dark mode based on time
      if (localStorage.getItem('darkMode') === null) {
        const hours = new Date().getHours();
        const isNight = hours < 6 || hours >= 20;
        if (isNight) {
          document.body.classList.add('dark-mode');
          localStorage.setItem('darkMode', 'true');
          updateThemeButton(true);
        }
      }
    }

    function toggleDarkMode() {
      const isDark = !document.body.classList.contains('dark-mode');
      document.body.classList.toggle('dark-mode', isDark);
      localStorage.setItem('darkMode', isDark);
      updateThemeButton(isDark);
    }
    
    function updateThemeButton(isDark) {
      const icon = isDark ? 'fa-sun' : 'fa-moon';
      const text = isDark ? '–°–≤—ñ—Ç–ª–∏–π —Ä–µ–∂–∏–º' : '–¢–µ–º–Ω–∏–π —Ä–µ–∂–∏–º';
      document.querySelector('.theme-toggle').innerHTML = 
        `<i class="fas ${icon}"></i> ${text}`;
    }

    function setUnit(unit) {
      currentUnit = unit;
      document.querySelectorAll('.unit-btn').forEach(btn => {
        btn.classList.remove('active');
      });
      event.target.classList.add('active');
      
      if (lastCity) {
        getWeather();
      }
    }

    async function setCity(cityName) {
      document.getElementById("city").value = cityName;
      await getWeather();
    }

    // –§—É–Ω–∫—Ü—ñ—è –∑–≤–æ—Ä–æ—Ç–Ω–æ–≥–æ –≥–µ–æ–∫–æ–¥—É–≤–∞–Ω–Ω—è (–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ -> –Ω–∞–∑–≤–∞ –º—ñ—Å—Ü—è)
    async function reverseGeocode(lat, lon) {
      try {
        const response = await fetch(
          `https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lon}`
        );
        const data = await response.json();
        
        if (data && data.address) {
          return data.address.city || data.address.town || data.address.village || data.address.county;
        }
        throw new Error("–ù–µ –≤–¥–∞–ª–æ—Å—è –≤–∏–∑–Ω–∞—á–∏—Ç–∏ –º—ñ—Å—Ü–µ");
      } catch (error) {
        throw new Error("–ü–æ–º–∏–ª–∫–∞ –∑–≤–æ—Ä–æ—Ç–Ω–æ–≥–æ –≥–µ–æ–∫–æ–¥—É–≤–∞–Ω–Ω—è: " + error.message);
      }
    }

    // –í–∏–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è –≥–µ–æ–ª–æ–∫–∞—Ü—ñ—ó
    async function getLocation() {
      if (navigator.geolocation) {
        showLoading();
        navigator.geolocation.getCurrentPosition(
          async position => {
            const lat = position.coords.latitude;
            const lon = position.coords.longitude;
            
            try {
              // –û—Ç—Ä–∏–º—É—î–º–æ –Ω–∞–∑–≤—É –º—ñ—Å—Ç–∞ –∑–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏
              const locationName = await reverseGeocode(lat, lon);
              lastCity = locationName;
              document.getElementById("city").value = locationName;
              localStorage.setItem('lastCity', locationName);
              
              await getWeatherByCoords(lat, lon);
            } catch (error) {
              hideLoading();
              showError("–ù–µ –≤–¥–∞–ª–æ—Å—è –≤–∏–∑–Ω–∞—á–∏—Ç–∏ –º—ñ—Å—Ü–µ: " + error.message);
            }
          },
          error => {
            hideLoading();
            showError("–ù–µ –≤–¥–∞–ª–æ—Å—è –æ—Ç—Ä–∏–º–∞—Ç–∏ –≤–∞—à–µ –º—ñ—Å—Ü–µ–∑–Ω–∞—Ö–æ–¥–∂–µ–Ω–Ω—è: " + error.message);
          }
        );
      } else {
        showError("–ì–µ–æ–ª–æ–∫–∞—Ü—ñ—è –Ω–µ –ø—ñ–¥—Ç—Ä–∏–º—É—î—Ç—å—Å—è –≤–∞—à–∏–º –±—Ä–∞—É–∑–µ—Ä–æ–º");
      }
    }

    function getWeatherByCoords(lat, lon) {
      const url = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${apiKey}&lang=uk&units=${currentUnit}`;
      fetchWeather(url);
      
      // Get weather alerts
      getWeatherAlerts(lat, lon);
      
      // Initialize map if not already
      if (!mapInitialized) {
        initMap(lat, lon);
      } else {
        map.setView([lat, lon], 10);
      }
    }

    function initMap(lat, lon) {
      if (!map) {
        map = L.map('map').setView([lat, lon], 10);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
          attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);
        
        // Add marker
        L.marker([lat, lon]).addTo(map)
          .bindPopup('–í–∞—à–µ –º—ñ—Å—Ü–µ–∑–Ω–∞—Ö–æ–¥–∂–µ–Ω–Ω—è')
          .openPopup();
          
        mapInitialized = true;
      }
    }

    async function getWeather() {
      const location = document.getElementById("city").value.trim();
      if (!location) {
        showError("–ë—É–¥—å –ª–∞—Å–∫–∞, –≤–≤–µ–¥—ñ—Ç—å –Ω–∞–∑–≤—É –Ω–∞—Å–µ–ª–µ–Ω–æ–≥–æ –ø—É–Ω–∫—Ç—É");
        return;
      }
      
      try {
        showLoading();
        // –ì–µ–æ–∫–æ–¥—É–≤–∞–Ω–Ω—è –≤–≤–µ–¥–µ–Ω–æ—ó –Ω–∞–∑–≤–∏
        const coords = await geocodeLocation(location);
        lastCity = coords.displayName; // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ –∫–æ—Ä–µ–∫—Ç–Ω—É –Ω–∞–∑–≤—É
        
        // –û—Ç—Ä–∏–º—É—î–º–æ –ø–æ–≥–æ–¥—É –∑–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏
        await getWeatherByCoords(coords.lat, coords.lon);
        
        // –û–Ω–æ–≤–ª—é—î–º–æ –ø–æ–ª–µ –≤–≤–æ–¥—É –∑ –Ω–æ—Ä–º–∞–ª—ñ–∑–æ–≤–∞–Ω–æ—é –Ω–∞–∑–≤–æ—é
        document.getElementById('city').value = coords.displayName;
        localStorage.setItem('lastCity', coords.displayName);
        
      } catch (error) {
        showError(error.message);
      }
    }

    function fetchWeather(url) {
      fetch(url)
        .then(response => {
          if (!response.ok) {
            if (response.status === 404) throw new Error("–ú—ñ—Å—Ç–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ");
            if (response.status === 429) throw new Error("–ó–∞–±–∞–≥–∞—Ç–æ –∑–∞–ø–∏—Ç—ñ–≤");
            throw new Error("–ü–æ–º–∏–ª–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞");
          }
          return response.json();
        })
        .then(data => {
          displayWeather(data);
          getForecast(data.name);
          getHourlyForecast(data.coord.lat, data.coord.lon);
          getAirQuality(data.coord.lat, data.coord.lon);
          getWeatherAlerts(data.coord.lat, data.coord.lon);
          renderSavedCities();
          
          // Initialize map
          if (!mapInitialized) {
                initMap(data.coord.lat, data.coord.lon);
          } else {
            map.setView([data.coord.lat, data.coord.lon], 10);
            // Clear existing markers and add new
            map.eachLayer(layer => {
              if (layer instanceof L.Marker) {
                map.removeLayer(layer);
              }
            });
            L.marker([data.coord.lat, data.coord.lon]).addTo(map)
              .bindPopup(data.name)
              .openPopup();
          }
        })
        .catch(error => {
          showError(error.message);
        });
    }

    // –í–∏–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –ø–æ–≥–æ–¥–∏
    function displayWeather(data) {
      hideLoading();
      
      const tempUnit = currentUnit === 'metric' ? '¬∞C' : '¬∞F';
      const speedUnit = currentUnit === 'metric' ? '–º/—Å' : '–º–∏–ª—å/–≥–æ–¥';
      const weatherIcon = getWeatherIcon(data.weather[0].id);
      
      // –û–Ω–æ–≤–ª–µ–Ω–æ: –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –∫–æ—Ä–µ–∫—Ç–Ω—É –Ω–∞–∑–≤—É –º—ñ—Å—Ç–∞
      const cityName = lastCity || data.name;
      
      // Convert sunrise/sunset to local time
      const sunrise = new Date(data.sys.sunrise * 1000);
      const sunset = new Date(data.sys.sunset * 1000);
      
      // Calculate dew point
      const dewPoint = calculateDewPoint(data.main.temp, data.main.humidity, currentUnit);
      
      const result = `
        <div class="weather-info">
          <div class="city-name" id="current-city">${cityName}</div>
          <div class="weather-icon">${weatherIcon}</div>
          <div class="temp">${Math.round(data.main.temp)}${tempUnit}</div>
          <div class="weather-desc">${data.weather[0].description}</div>
          <div class="feels-like">–í—ñ–¥—á—É–≤–∞—î—Ç—å—Å—è —è–∫: ${Math.round(data.main.feels_like)}${tempUnit}</div>
          
          <div class="details">
            <div class="detail-card">
              <i class="fas fa-tint"></i>
              <div class="detail-value">${data.main.humidity}%</div>
              <div class="detail-label">–í–æ–ª–æ–≥—ñ—Å—Ç—å</div>
            </div>
            <div class="detail-card">
              <i class="fas fa-wind"></i>
              <div class="detail-value">${data.wind.speed} ${speedUnit}</div>
              <div class="detail-label">–í—ñ—Ç–µ—Ä</div>
            </div>
            <div class="detail-card">
              <i class="fas fa-tachometer-alt"></i>
              <div class="detail-value">${data.main.pressure} hPa</div>
              <div class="detail-label">–¢–∏—Å–∫</div>
            </div>
            <div class="detail-card">
              <i class="fas fa-temperature-low"></i>
              <div class="detail-value">${dewPoint}${tempUnit}</div>
              <div class="detail-label">–¢–æ—á–∫–∞ —Ä–æ—Å–∏</div>
            </div>
            <div class="detail-card">
              <i class="fas fa-sun"></i>
              <div class="detail-value">${sunrise.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</div>
              <div class="detail-label">–°—Ö—ñ–¥</div>
            </div>
            <div class="detail-card">
              <i class="fas fa-moon"></i>
              <div class="detail-value">${sunset.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</div>
              <div class="detail-label">–ó–∞—Ö—ñ–¥</div>
            </div>
          </div>
          
          <div class="update-time">
            –û–Ω–æ–≤–ª–µ–Ω–æ: ${new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}
          </div>
        </div>
      `;
      
      document.getElementById("result").innerHTML = result;
      document.getElementById("forecastContainer").style.display = 'block';
      document.getElementById("savedContainer").style.display = 'block';
      
      // Add animation to weather icon
      setTimeout(() => {
        const icon = document.querySelector('.weather-icon');
        if (icon) {
          icon.style.transform = 'scale(1.1)';
          setTimeout(() => icon.style.transform = 'scale(1)', 500);
        }
      }, 100);
    }

    function getForecast(city) {
      const url = `https://api.openweathermap.org/data/2.5/forecast?q=${city}&appid=${apiKey}&lang=uk&units=${currentUnit}`;
      
      fetch(url)
        .then(response => {
          if (!response.ok) throw new Error("–ü–æ–º–∏–ª–∫–∞ –ø—Ä–æ–≥–Ω–æ–∑—É");
          return response.json();
        })
        .then(data => {
          displayForecast(data);
        })
        .catch(error => {
          console.error("–ü–æ–º–∏–ª–∫–∞ –ø—Ä–æ–≥–Ω–æ–∑—É:", error);
          document.getElementById("forecastContainer").style.display = 'none';
        });
    }

    // –ì—Ä—É–ø—É–≤–∞–Ω–Ω—è –ø—Ä–æ–≥–Ω–æ–∑—É –ø–æ –¥–Ω—è—Ö
    function groupForecastByDay(list) {
      const days = {};
      list.forEach(item => {
        const date = new Date(item.dt * 1000);
        const dayKey = date.toISOString().split('T')[0];
        if (!days[dayKey]) days[dayKey] = [];
        days[dayKey].push(item);
      });
      
      // –í–∏–±–∏—Ä–∞—î–º–æ –ø—Ä–æ–≥–Ω–æ–∑ –±–ª–∏–∑—å–∫–æ 12:00 –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –¥–Ω—è
      return Object.values(days).map(dayItems => {
        return dayItems.find(item => {
          const hours = new Date(item.dt * 1000).getHours();
          return hours >= 11 && hours <= 13;
        }) || dayItems[0];
      }).slice(0, 5);
    }

    function displayForecast(data) {
      const forecastElement = document.getElementById("forecast");
      forecastElement.innerHTML = '';
      
      // –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –Ω–æ–≤—É —Ñ—É–Ω–∫—Ü—ñ—é –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è
      const dailyForecast = groupForecastByDay(data.list);

      dailyForecast.forEach(day => {
        const date = new Date(day.dt * 1000);
        const dayName = date.toLocaleDateString('uk-UA', { weekday: 'long' });
        const tempUnit = currentUnit === 'metric' ? '¬∞C' : '¬∞F';
        const weatherIcon = getWeatherIcon(day.weather[0].id);
        
        forecastElement.innerHTML += `
          <div class="forecast-card">
            <div class="forecast-day">${dayName}</div>
            <div class="forecast-icon">${weatherIcon}</div>
            <div class="forecast-temp">${Math.round(day.main.temp)}${tempUnit}</div>
            <div class="forecast-desc">${day.weather[0].description}</div>
          </div>
        `;
      });
    }

    function getHourlyForecast(lat, lon) {
      const url = `https://api.openweathermap.org/data/2.5/forecast?lat=${lat}&lon=${lon}&appid=${apiKey}&lang=uk&units=${currentUnit}`;
      
      fetch(url)
        .then(response => response.json())
        .then(data => {
          displayHourlyForecast(data);
        })
        .catch(error => {
          console.error("–ü–æ–º–∏–ª–∫–∞ –ø–æ—á–∞—Å–æ–≤–æ–≥–æ –ø—Ä–æ–≥–Ω–æ–∑—É:", error);
        });
    }
    
    function getAirQuality(lat, lon) {
      fetch(`https://api.openweathermap.org/data/2.5/air_pollution?lat=${lat}&lon=${lon}&appid=${apiKey}`)
        .then(response => response.json())
        .then(data => {
          const aqi = data.list[0].main.aqi;
          const levels = ['–î–æ–±—Ä–µ', '–ó–∞–¥–æ–≤—ñ–ª—å–Ω–æ', '–ü–æ–º—ñ—Ä–Ω–æ', '–ü–æ–≥–∞–Ω–æ', '–î—É–∂–µ –ø–æ–≥–∞–Ω–æ'];
          document.getElementById('airQuality').textContent = levels[aqi-1];
        })
        .catch(error => {
          console.error("–ü–æ–º–∏–ª–∫–∞ —è–∫–æ—Å—Ç—ñ –ø–æ–≤—ñ—Ç—Ä—è:", error);
        });
    }
    
    // –û–Ω–æ–≤–ª–µ–Ω–æ –¥–æ One Call API 2.5
    function getWeatherAlerts(lat, lon) {
      fetch(`https://api.openweathermap.org/data/2.5/onecall?lat=${lat}&lon=${lon}&appid=${apiKey}&exclude=minutely,hourly,daily`)
        .then(response => {
          if (!response.ok) {
            throw new Error("–ù–µ –≤–¥–∞–ª–æ—Å—è –æ—Ç—Ä–∏–º–∞—Ç–∏ –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è");
          }
          return response.json();
        })
        .then(data => {
          if (data.alerts && data.alerts.length > 0) {
            showAlert(data.alerts[0]);
          }
        })
        .catch(error => {
          console.error("–ü–æ–º–∏–ª–∫–∞ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω—å:", error.message);
        });
    }

    function displayHourlyForecast(data) {
      const hourlyElement = document.getElementById("hourlyForecast");
      hourlyElement.innerHTML = '';
      
      // Get next 8 hours
      const hourlyData = data.list.slice(0, 8);
      
      hourlyData.forEach(hour => {
        const date = new Date(hour.dt * 1000);
        const time = date.toLocaleTimeString([], {hour: '2-digit'});
        const tempUnit = currentUnit === 'metric' ? '¬∞C' : '¬∞F';
        const weatherIcon = getWeatherIcon(hour.weather[0].id);
        
        hourlyElement.innerHTML += `
          <div class="hourly-card">
            <div class="hourly-time">${time}</div>
            <div class="hourly-icon">${weatherIcon}</div>
            <div class="hourly-temp">${Math.round(hour.main.temp)}${tempUnit}</div>
          </div>
        `;
      });
    }

    function getWeatherIcon(weatherId) {
      // Thunderstorm
      if (weatherId >= 200 && weatherId < 300) {
        return '<i class="fas fa-bolt"></i>';
      }
      // Drizzle
      else if (weatherId >= 300 && weatherId < 400) {
        return '<i class="fas fa-cloud-rain"></i>';
      }
      // Rain
      else if (weatherId >= 500 && weatherId < 600) {
        return weatherId == 511 ? '<i class="fas fa-icicles"></i>' : '<i class="fas fa-cloud-showers-heavy"></i>';
      }
      // Snow
      else if (weatherId >= 600 && weatherId < 700) {
        return '<i class="fas fa-snowflake"></i>';
      }
      // Atmosphere
      else if (weatherId >= 700 && weatherId < 800) {
        return '<i class="fas fa-smog"></i>';
      }
      // Clear
      else if (weatherId === 800) {
        return '<i class="fas fa-sun"></i>';
      }
      // Clouds
      else if (weatherId >= 801 && weatherId < 900) {
        return weatherId === 801 ? '<i class="fas fa-cloud-sun"></i>' : '<i class="fas fa-cloud"></i>';
      }
      // Default
      else {
        return '<i class="fas fa-cloud"></i>';
      }
    }
    
    // –û–Ω–æ–≤–ª–µ–Ω–æ: –≤—Ä–∞—Ö–æ–≤—É—î–º–æ –æ–¥–∏–Ω–∏—Ü—ñ –≤–∏–º—ñ—Ä—é–≤–∞–Ω–Ω—è
    function calculateDewPoint(temp, humidity, unit) {
      // –ö–æ–Ω–≤–µ—Ä—Ç—É—î–º–æ –≤ ¬∞C –¥–ª—è —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—ñ–≤
      let tempC = unit === 'metric' ? temp : (temp - 32) * 5/9;
      
      const a = 17.27;
      const b = 237.7;
      const alpha = (a * tempC) / (b + tempC) + Math.log(humidity/100);
      let dewPoint = (b * alpha) / (a - alpha);
      
      // –ö–æ–Ω–≤–µ—Ä—Ç—É—î–º–æ –Ω–∞–∑–∞–¥ —É –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ –æ–¥–∏–Ω–∏—Ü—ñ
      return unit === 'metric' 
        ? dewPoint.toFixed(1)
        : (dewPoint * 9/5 + 32).toFixed(1);
    }
    
    // –§–Ü–ö–°–û–í–ê–ù–ê –§–£–ù–ö–¶–Ü–Ø –ó–ë–ï–†–ï–ñ–ï–ù–ù–Ø –ú–Ü–°–¢–ê
    function saveCity() {
      const cityElement = document.getElementById('current-city');
      if (!cityElement || cityElement.textContent === '–õ–∞—Å–∫–∞–≤–æ –ø—Ä–æ—Å–∏–º–æ!') {
        showError("–ù–µ–º–∞—î –¥–∞–Ω–∏—Ö –ø—Ä–æ –º—ñ—Å—Ç–æ –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è");
        return;
      }
      
      const cityName = cityElement.textContent;
      const saved = JSON.parse(localStorage.getItem('savedCities')) || [];
      
      if (!saved.includes(cityName)) {
        saved.push(cityName);
        localStorage.setItem('savedCities', JSON.stringify(saved));
        renderSavedCities();
        
        // –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è
        alert(`–ú—ñ—Å—Ç–æ "${cityName}" —É—Å–ø—ñ—à–Ω–æ –∑–±–µ—Ä–µ–∂–µ–Ω–æ!`);
      } else {
        alert(`–ú—ñ—Å—Ç–æ "${cityName}" –≤–∂–µ —î —É –∑–±–µ—Ä–µ–∂–µ–Ω–∏—Ö!`);
      }
    }
    
    function renderSavedCities() {
      const saved = JSON.parse(localStorage.getItem('savedCities')) || [];
      const container = document.getElementById('savedCities');
      container.innerHTML = '';
      
      if (saved.length === 0) {
        document.getElementById('savedContainer').style.display = 'none';
        return;
      }
      
      saved.forEach(city => {
        const btn = document.createElement('div');
        btn.className = 'city-btn';
        btn.textContent = city;
        btn.onclick = () => setCity(city);
        container.appendChild(btn);
      });
      
      document.getElementById('savedContainer').style.display = 'block';
    }
    
    function showAlert(alert) {
      const alertDiv = document.createElement('div');
      alertDiv.className = 'weather-alert';
      alertDiv.innerHTML = `
        <i class="fas fa-exclamation-triangle"></i>
        <strong>${alert.event}</strong>: ${alert.description}
      `;
      document.querySelector('.app-container').prepend(alertDiv);
      
      // Auto remove after 10 seconds
      setTimeout(() => {
        alertDiv.remove();
      }, 10000);
    }

    function showLoading() {
      document.querySelector(".loading").style.display = "block";
      document.getElementById("result").innerHTML = "";
    }

    function hideLoading() {
      document.querySelector(".loading").style.display = "none";
    }

    function showError(message) {
      hideLoading();
      
      let errorHTML = `
        <div class="error">
          <i class="fas fa-exclamation-triangle"></i>
          <p>${message}</p>
      `;
      
      if (message.includes("–≥–µ–æ–∫–æ–¥—É–≤–∞–Ω–Ω—è")) {
        errorHTML += `<p>–°–ø—Ä–æ–±—É–π—Ç–µ —É—Ç–æ—á–Ω–∏—Ç–∏ –Ω–∞–∑–≤—É, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥: "–°–µ–ª–∏—â–µ –ö–æ–∑–∞—Ä–æ–≤–∏—á—ñ"</p>`;
      }
      
      errorHTML += `
          <button onclick="resetApp()">
            <i class="fas fa-redo"></i> –°–ø—Ä–æ–±—É–≤–∞—Ç–∏ –∑–Ω–æ–≤—É
          </button>
        </div>
      `;
      
      document.getElementById("result").innerHTML = errorHTML;
      document.getElementById("forecastContainer").style.display = 'none';
    }

    function resetApp() {
      document.getElementById("city").value = "";
      document.getElementById("result").innerHTML = `
        <div class="welcome-message">
          <i class="fas fa-cloud-sun weather-icon"></i>
          <h2 class="city-name">–õ–∞—Å–∫–∞–≤–æ –ø—Ä–æ—Å–∏–º–æ!</h2>
          <p class="weather-desc">–í–≤–µ–¥—ñ—Ç—å –Ω–∞–∑–≤—É –Ω–∞—Å–µ–ª–µ–Ω–æ–≥–æ –ø—É–Ω–∫—Ç—É (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥: –ë–æ—è—Ä–∫–∞, –ö–æ–∑–∞—Ä–æ–≤–∏—á—ñ)</p>
        </div>
      `;
      document.getElementById("forecastContainer").style.display = 'none';
    }

    // Modal functions
    function showAbout() {
      document.getElementById('aboutModal').style.display = 'flex';
    }

    function showContact() {
      document.getElementById('contactModal').style.display = 'flex';
    }

    function showPrivacy() {
      document.getElementById('privacyModal').style.display = 'flex';
    }

    function closeModal(modalId) {
      document.getElementById(modalId).style.display = 'none';
    }

    // Handle Enter key press
    document.getElementById("city").addEventListener("keypress", function(event) {
      if (event.key === "Enter") {
        getWeather();
      }
    });

    // Close modal when clicking outside
    window.onclick = function(event) {
      const modals = document.querySelectorAll('.modal');
      modals.forEach(modal => {
        if (event.target == modal) {
          modal.style.display = "none";
        }
      });
    }

    // Initialize map with default view
    function initDefaultMap() {
      map = L.map('map').setView([49.0, 31.5], 6); // Center on Ukraine
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
      }).addTo(map);
      mapInitialized = true;
    }

    // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –∞–≤—Ç–æ–¥–æ–ø–æ–≤–Ω–µ–Ω–Ω—è
    function debounce(func, delay) {
      let timeout;
      return function() {
        const context = this;
        const args = arguments;
        clearTimeout(timeout);
        timeout = setTimeout(() => func.apply(context, args), delay);
      };
    }

    async function getSuggestions(query) {
      if (query.length < 3) {
        hideSuggestions();
        return;
      }

      try {
        const response = await fetch(
          `https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(query)}&countrycodes=ua&limit=5&accept-language=uk`
        );
        const data = await response.json();
        showSuggestions(data);
      } catch (error) {
        console.error("–ü–æ–º–∏–ª–∫–∞ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –ø—ñ–¥–∫–∞–∑–æ–∫:", error);
        hideSuggestions();
      }
    }

    function showSuggestions(suggestions) {
      const container = document.getElementById('suggestions');
      container.innerHTML = '';
      
      if (suggestions.length === 0) {
        container.style.display = 'none';
        return;
      }
      
      // –§–∏–ª—å—Ç—Ä—É–µ–º —Ç–æ–ª—å–∫–æ —É–∫—Ä–∞–∏–Ω—Å–∫–∏–µ –ª–æ–∫–∞—Ü–∏–∏
      const ukrainianSuggestions = suggestions.filter(item => 
        item.display_name.includes("–£–∫—Ä–∞—ó–Ω–∞") || 
        item.display_name.includes("–£–∫—Ä–∞–∏–Ω–∞")
      );
      
      ukrainianSuggestions.forEach(item => {
        const div = document.createElement('div');
        div.className = 'suggestion-item';
        
        // –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –Ω–∞–∑–≤–∞–Ω–∏–µ —Å –æ–±–ª–∞—Å—Ç—å—é –∏ —Ä–∞–π–æ–Ω–æ–º
        const nameParts = item.display_name.split(', ');
        let displayName = nameParts[0]; // –û—Å–Ω–æ–≤–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ
        
        // –î–æ–±–∞–≤–ª—è–µ–º –æ–±–ª–∞—Å—Ç—å –∏ —Ä–∞–π–æ–Ω –µ—Å–ª–∏ –µ—Å—Ç—å
        if (nameParts.length > 1) {
          // –ò—â–µ–º –æ–±–ª–∞—Å—Ç—å (–æ–±—ã—á–Ω–æ –ø—Ä–µ–¥–ø–æ—Å–ª–µ–¥–Ω–∏–π —ç–ª–µ–º–µ–Ω—Ç)
          const regionIndex = Math.max(nameParts.length - 2, 1);
          displayName += `, ${nameParts[regionIndex]}`;
          
          // –î–æ–±–∞–≤–ª—è–µ–º —Ä–∞–π–æ–Ω –µ—Å–ª–∏ –µ—Å—Ç—å
          if (nameParts.length > 2) {
            const districtIndex = Math.max(nameParts.length - 3, 1);
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ —ç—Ç–æ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ä–∞–π–æ–Ω
            if (nameParts[districtIndex].includes("—Ä–∞–π–æ–Ω")) {
              displayName += `, ${nameParts[districtIndex]}`;
            }
          }
        }
        
        div.textContent = displayName;
        div.onclick = () => {
          document.getElementById('city').value = displayName;
          hideSuggestions();
          getWeather();
        };
        container.appendChild(div);
      });
      
      container.style.display = 'block';
    }

    function hideSuggestions() {
      document.getElementById('suggestions').style.display = 'none';
    }

    // –î–æ–¥–∞—î–º–æ –æ–±—Ä–æ–±–Ω–∏–∫ –ø–æ–¥—ñ–π –¥–ª—è –∞–≤—Ç–æ–¥–æ–ø–æ–≤–Ω–µ–Ω–Ω—è
    document.getElementById('city').addEventListener('input', debounce(function() {
      getSuggestions(this.value);
    }, 300));

    // –ü—Ä–∏—Ö–æ–≤—É—î–º–æ –ø—ñ–¥–∫–∞–∑–∫–∏ –ø—Ä–∏ –∫–ª—ñ–∫—É –ø–æ–∑–∞ –ø–æ–ª–µ–º
    document.addEventListener('click', function(e) {
      if (e.target.id !== 'city') {
        hideSuggestions();
      }
    });

    // Initialize
    window.onload = function() {
      initDarkMode();
      initDefaultMap(); // Initialize map on load
      
      // Load last city from localStorage
      const savedCity = localStorage.getItem('lastCity');
      if (savedCity) {
        document.getElementById("city").value = savedCity;
        getWeather();
      } else {
        setCity('–ö–∏—ó–≤');
      }
      
      renderSavedCities();
    };
  </script>
</body>
</html>